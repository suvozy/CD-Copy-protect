/*
* Copyright 2009-2011 Webtrends Inc. All Rights Reserved.
* WEBTRENDS PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.
*
*/

WTOptimize.zd67f=function(z1a23){var z32da=this;var z0eb2=false;WTEvent.CONTROL_RESPONSE="control_response";WTEvent.CONTROL_PART="control_part";WTEvent.zb899="control_abort";WTEvent.z0aef="control_invalid";WTEvent.z5749="control_preprocess";WTEvent.z257b="control_process";WTEvent.z85a2="control_pageview";WTEvent.z6938="control_conversion";WTEvent.zb2de="control_conversionevent";WTEvent.zecbe="dom_ready";WTEvent.z6fd7="dom_onload";WTEvent.PRECONVERSIONEVENT="preconversionevent";WTEvent.CONVERSIONEVENT="conversionevent";this.z95e8=function(){z1a23.zd0b7(WTEvent.DONE,za01b,za01b);z1a23.zd0b7(WTEvent.zb899,this.z1028,this.z1028);z1a23.zd0b7(WTEvent.z0aef,this.ze5d9,this.z1028);z1a23.zd0b7(WTEvent.z85a2,this.z4708,this.z3c7c);z1a23.zd0b7(WTEvent.z6938,this.z5b2c,this.z3c7c);z1a23.zd0b7(WTEvent.z5749,this.zede2);z1a23.zd0b7(WTEvent.z257b,this.z348e);z1a23.zd0b7(WTEvent.zb2de,this.zd78e);if(!z1a23.zfa9c){z1a23.zefb8=false;WTEvent.HIDESHOW="hide_show";z1a23.zfa9c=function(z9de9,type,z508a){if(!type){if(z9de9.style.visibility=='hidden'){type="visibility";}else{type="display";};}if(type=="display"){z9de9.style.display=(z508a?'':'none');if(z9de9!=document.body&&!z508a){document.body.style.display='';};}else if(type=="visibility"){z9de9.style.visibility=(z508a?'visible':'hidden');z9de9.style.hidden=!z508a;if(z9de9!=document.body&&!z508a){document.body.style.visibility='visible';document.body.style.hidden=false;};}else if(type=="shift"){z9de9.style.position=(z508a?'relative':'absolute');z9de9.style.left=(z508a?'auto':'-100%');if(z9de9!=document.body&&!z508a){document.body.style.position='relative';document.body.style.left='auto';};}else if(type=="none"){}var zf64e={};zf64e['displayType']=type;zf64e['display']=z508a;z1a23.z88d3(new WTEvent(WTEvent.HIDESHOW,WTEvent.STATUS_SUCCESS,z9de9,zf64e));};}var z3fef=function(){if(z0eb2){return;}z0eb2=true;z1a23.z88d3(new WTEvent(WTEvent.zecbe,WTEvent.STATUS_SUCCESS),true);};var onload=function(){if(z1a23.zefb8){return;}z1a23.zefb8=true;z1a23.z88d3(new WTEvent(WTEvent.z6fd7,WTEvent.STATUS_SUCCESS),true);};try{if(document.addEventListener){if(document.readyState==="complete"||typeof(document.readyState)==="undefined"){z3fef();}document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,false);z3fef();},false);if(/WebKit|Opera/i.test(navigator.userAgent)){var zd8d4=setInterval(function(){if(/loaded|complete/.test(document.readyState)){clearInterval(zd8d4);z3fef();}},10);};}if(document.attachEvent){if(document.readyState==="complete"||document.readyState==="loading"){z3fef();}document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete"||document.readyState==="loading"){document.detachEvent("onreadystatechange",arguments.callee);z3fef();}});}if(window.addEventListener){window.addEventListener('load',function(){window.removeEventListener("load",arguments.callee,false);z3fef();},false);}else if(window.attachEvent){window.attachEvent('onload',function(){window.detachEvent("onload",arguments.callee,false);z3fef();});}if(z1a23.zefb8){onload();}else{if(window.addEventListener){window.addEventListener('load',function(){window.removeEventListener("load",arguments.callee,false);onload();},false);}else if(window.attachEvent){window.attachEvent('onload',function(){window.detachEvent("onload",arguments.callee,false);onload();});};}}catch(z392c){z3fef();onload();}z1a23.Debug.z5060("library: Server library initialized");};var za01b=function(event){z1a23.Debug.z5060("done: Webtrends Optimize is done processing the page. ("+(z1a23.z4e9a-z1a23.z93cb)+" ms)");};var zf9ac=function(z5792,z6b4f){this.zccdd=z5792;this.z019b=null;this.z0386=z6b4f;var z677c=this;zf9ac.z38a4="init";zf9ac.z7365="prepare";zf9ac.z94bc="preprocess";zf9ac.z7df9="process";zf9ac.za651="prerender";zf9ac.z971e="render";zf9ac.z7bd2="done";zf9ac.z3a29="conversionevent";zf9ac.zb7d1="pageview";zf9ac.zb00a="conversion";zf9ac.z10ca="AB";zf9ac.z7ffc="FULLFACTORIAL";zf9ac.zcf44="MULTIVAR";zf9ac.z6f4e="SPLIT";zf9ac.zbf4a="TARGET";zf9ac.zd4c4="BASELINE";var z1382={};var z7715={};var z67fd=null;this.z95e8=function(){this.z019b=zf9ac.z38a4;};this.getParams=function(){return this.zccdd;};this.zd12e=function(){return z1382;};this.z452a=function(z937d){return z7715[z937d];};this.setup=function(){this.z0386.zd0b7(WTEvent.CONTROL_RESPONSE,this.zac2c,this.zdbe8);this.z696d();this.zf563();};this.z45cc=function(type){this.z696d(type);this.zf563();};this.z696d=function(type){z1382["keyToken"]=this.zccdd["s_keyToken"];z1382["params"]={};if(!type){z1382["params"]["requestType"]=this.zccdd["s_requestType"];}else{z1382["params"]["requestType"]=type;}if(this.zccdd["testAlias"]){z1382["params"]["testAlias"]=this.zccdd["testAlias"];}if(this.zccdd["controlCookieTimeout"]){z1382["params"]["controlCookieTimeout"]=this.zccdd["controlCookieTimeout"];}if(this.zccdd["splitMatchRegex"]){z1382["params"]["splitMatchRegex"]=this.zccdd["splitMatchRegex"];}if(this.zccdd["conversionPoint"]){z1382["params"]["conversionPoint"]=this.zccdd["conversionPoint"];}if(this.zccdd["testGroup"]){z1382["params"]["testGroup"]=this.zccdd["testGroup"];}z1382["params"]["s_mode"]=this.zccdd["s_mode"];z1382["params"]["debug"]=this.zccdd["debug"];z1382["params"]["cookiePrefix"]=this.zccdd["cookiePrefix"];z1382["params"]["cookieInspection"]=this.zccdd["cookieInspection"];z1382["params"]["use3rdPartyCookies"]=this.zccdd["use3rdPartyCookies"];z1382["body"]={};z1382["body"]["data"]=this.zccdd["data"];if(document.referrer!=""){z1382["body"]["data"]["_wm_referer"]=document.referrer;}if(this.zccdd['externalUID']){z1382["body"]["data"]['_wm_externalUID']=this.zccdd['externalUID'];}z1382["body"]["data"]['_wm_TimeOffset']=z32da.z31a9()*1000*60*60;var z199d=z32da.z80f0();if(z199d){for(var z2186 in z199d){z1382["body"]["data"][z2186]=z199d[z2186];};}z1382["body"]["cookies"]={};var z0a48=document.cookie.split(";");for(var z205e=0;z205e<z0a48.length;z205e++){var z8403=z0a48[z205e].split("=");while(z8403[0].charAt(0)===' '){z8403[0]=z8403[0].substring(1,z8403[0].length);}if(!this.zccdd["cookieInspection"]&&z8403[0].indexOf(this.zccdd["cookiePrefix"])!=0){continue;}z1382["body"]["cookies"][z8403[0]]=z8403[1];}this.z0386.fireEvent(new WTEvent(WTEvent.CONFIGURE,WTEvent.STATUS_SUCCESS,this));};this.zf563=function(z6a1f){if(z6a1f){z1382["params"]["preprocessed"]=z6a1f;}var z4529=z9249.z4b1f(z1382);z1a23.Debug.zfda7("service: JSON Control Request\n"+z4529);z4529=z1a23.z32ad.zcdd3(z4529,z1382["keyToken"]);var url=this.zccdd["s_otsUrl"]+"/";var z8159=url.length+z4529.length;if((this.zccdd["s_urlParts"]&&z8159>this.zccdd["s_maxUrl"])||z8159>this.zccdd["s_urlLimit"]){var z6836=new Date().getTime()+"-"+Math.floor(Math.random()*1000+1);var za643=this.zccdd["s_maxUrl"]-url.length;if((this.zccdd["s_urlParts"]&&this.zccdd["s_maxUrl"]>this.zccdd["s_urlLimit"])||!this.zccdd["s_urlParts"]){za643=this.zccdd["s_urlLimit"]-url.length;}var z4548=Math.ceil(z4529.length/za643);var start=0;var zf12e=0;var z3da6=function(event){if(typeof event!="undefined"&&event!==null){if(event.target===null){return;}var z2ca0=z1a23.z32ad.zcc1d(event.target["control"],z1382["keyToken"]);z1a23.Debug.z5d59("control_part: JSON Control Part\n"+z2ca0);var zd1ef=z9249.parse(z2ca0);if(zd1ef["controlID"]!=z6836){return;};}var zf5f9=z4529.substr(start,za643);var zbade={};zbade["type"]="text/javascript";zbade["async"]="true";zbade["defer"]="true";zbade["src"]=url+zf5f9+"/"+z6836+"/"+zf12e+"/"+z4548;start+=zf5f9.length;zf12e++;if(zf12e>(z4548-1)){z1a23.za099(WTEvent.CONTROL_PART,arguments.callee);}setTimeout(function(){z32da.ze82b("script",zbade,null,document.getElementsByTagName('head')[0]);},0);};z1a23.zd0b7(WTEvent.CONTROL_PART,z3da6);z3da6();}else{var zbade={};zbade["type"]="text/javascript";zbade["src"]=url+z4529;zbade["async"]="true";zbade["defer"]="true";setTimeout(function(){z32da.ze82b("script",zbade,null,document.getElementsByTagName('head')[0]);},0);}};this.zc52f=function(){this.z019b=zf9ac.z94bc;this.z4cc8(zf9ac.z94bc);var z52fa=z7715[zf9ac.z94bc]["body"]["codeFragments"];for(var name in z52fa){if(z52fa.hasOwnProperty(name)){try{this.z0386.Debug.z5d59("codeFragment: [name:"+name+", code:"+z52fa[name]+"]");this.zccdd["data"][name]=z32da.z4efc(z52fa[name],true);}catch(z392c){this.z0386.Debug.z1dbb("codeFragment: error running code fragment [name: "+name+"], check error for details.",0,z392c);};};}};this.z596e=function(){this.z019b=zf9ac.z7df9;this.z4cc8(zf9ac.z7df9);if(z7715[zf9ac.z7df9]["body"]["cookies"]){for(var z7e3d in z7715[zf9ac.z7df9]["body"]["cookies"]){var z764b=z7715[zf9ac.z7df9]["body"]["cookies"][z7e3d];z0f8a(z7e3d,z764b["value"],z764b["timeout"],z764b["type"]);};}};this.zee58=function(){this.z019b=zf9ac.z3a29;var zfce9=z7715[zf9ac.z3a29]["body"]['conversionEvents'];for(var zf331 in zfce9){if(zfce9.hasOwnProperty(zf331)){var z634a=zfce9[zf331];switch(z634a['eventType']){case 0:z07f3(z634a);break;case 2:z0fa8(z634a);break;case 3:z25ba(z634a);break;default:z677c.z0386.Debug.z1dbb("unknown conversion event type: "+z634a['eventType']);};};}};var z07f3=function(z392c){try{var z4f97=z392c['domElementID'];var z35c2=function(event){var zf64e={};zf64e['conversionPoint']=z392c['conversionPointName'];if(event&&event.currentTarget&&event.currentTarget.tagName=="A"&&event.currentTarget.href){z1a23.conversion(z392c['testAlias'],event.currentTarget,zf64e);}else{z1a23.conversion(z392c['testAlias'],zf64e);}};for(z6747 in z4f97){if(z4f97.hasOwnProperty(z6747)){var z452f=z1a23.z32ad.z454c.z0c82(z6747);try{z1a23.z9d5a(z452f,z9dda(z452f,z4f97[z6747]),z35c2);z677c.z0386.Debug.z5d59("conversionEvent: setting on click event for [id:"+z6747+" , name: "+z392c['conversionPointName']+", alias: "+z392c['testAlias']+"]");}catch(z7830){z677c.z0386.Debug.z1dbb("unable to attach custom conversion event for [id: "+z6747+", name: "+z392c['conversionPointName']+", alias: "+z392c['testAlias']+"]",0,z7830);};};}}catch(z8a24){z677c.z0386.Debug.z1dbb("unable to attach on click conversion event.",0,z8a24);}};var z0fa8=function(z392c){try{var zf64e={};zf64e['conversionPoint']=z392c['conversionPointName'];setTimeout(function(event){z1a23.conversion(z392c['testAlias'],zf64e);},(z392c['timeOnPage']*1000));z677c.z0386.Debug.z5d59("conversionEvent: setting time on page event for [timer:"+z392c['timeOnPage']+" seconds , name: "+z392c['conversionPointName']+", alias: "+z392c['testAlias']+"]");}catch(z8a24){z677c.z0386.Debug.z1dbb("unable to attach on time on page conversion event for [timer:"+z392c['timeOnPage']+" seconds , name: "+z392c['conversionPointName']+", alias: "+z392c['testAlias']+"]",0,z8a24);}};var z25ba=function(z392c){try{var z4f97=z392c['domElementID'];var z0184=z32da.z4efc('var _tempfnvalue = function (event) {'+z392c['script']+'};');if(z0184==null){z0184=_tempfnvalue;}for(z6747 in z4f97){if(z4f97.hasOwnProperty(z6747)){var z452f=z1a23.z32ad.z454c.z0c82(z6747);var zfce9=z4f97[z6747].split(",");for(var zd6a9=0;zd6a9<zfce9.length;zd6a9++){var z2431=zfce9[zd6a9];try{z1a23.z9d5a(z452f,z2431,z0184);z677c.z0386.Debug.z5d59("conversionEvent: setting custom conversion event for [id: "+z6747+" , event: "+z2431+", name: "+z392c['conversionPointName']+", alias: "+z392c['testAlias']+"]");}catch(z7830){z677c.z0386.Debug.z1dbb("unable to attach custom conversion event for [id: "+z6747+", event: "+z2431+", name: "+z392c['conversionPointName']+", alias: "+z392c['testAlias']+"]",0,z7830);};};};}}catch(z8a24){z677c.z0386.Debug.z1dbb("unable to attach custom conversion event.",0,z8a24);}};var z9dda=function(z9de9,name){var z6b68=name.substr(0,2);if(z9de9.addEventListener){if(z6b68=='on'){return name.substring(2);};}else if(z9de9.attachEvent){if(z6b68!='on'){return 'on'+name;};}return name;};var z0f8a=function(name,value,z65d6,type){var z297e=null;if(type!="session"){z297e=new Date();z297e.setTime(z297e.getTime()+z65d6);}var z4384="";var zb13a=z677c.zccdd['cookieDomain'];if(typeof zb13a!="undefined"&&zb13a!==null&&zb13a!==""){z4384=" domain="+zb13a+";";}var z71fe="";if(z677c.zccdd['cookiePath']!==null&&z677c.zccdd['cookiePath']!==""){z71fe=" path="+z677c.zccdd['cookiePath']+";";}var z753f=name+"="+escape(value)+";"+z4384+z71fe+(z297e!==null?" expires="+z297e.toGMTString()+";":"");z677c.z0386.Debug.z5d59("cookie: setting cookie data: ["+z753f+"]");document.cookie=z753f;};var z7cb0=function(){if(z677c.zccdd["debug"]&&z677c.zccdd["debug"].length>0){z1a23.Debug.z5dbe=false;z1a23.Debug.z6c38=z677c.zccdd["debug"].length;z1a23.Debug.refresh(true);}else{z1a23.Debug.z5dbe=true;}};var z0932=function(){var z4cf9=z7715[zf9ac.z7df9]["body"]["factors"];var z7061=z7715[zf9ac.z7df9]["body"]["factorList"];var ze993=z7715[zf9ac.z7df9]["body"]["factorOperations"];var z0fee=null;for(var zc92c=0;zc92c<z7061.length;zc92c++){var zd081=z7061[zc92c];var z8186=ze993[zd081];try{if(z8186==0){z0fee=z1a23.z32ad.z454c.z0c82(zd081);if(!z0fee){z1a23.Debug.z1dbb("library/process: unable to load element for id ["+zd081+"] in page DOM.",0);throw "DOM element was null.";};}}catch(z392c){z1a23.Debug.z1dbb("library/process: unable to locate id ["+zd081+"] in page DOM, if using nested factors "+"make sure the id has been added to the page in the outer content.",0,z392c);throw "Invalid factor alias.";}try{if(z8186==0){z0fee.innerHTML=z4cf9[zd081];}if(z8186==0){var x=z0fee.getElementsByTagName("script");for(var z205e=0;z205e<x.length;z205e++){if(typeof x[z205e].src!="undefined"&&x[z205e].src!==null&&x[z205e].src!==""){var zbade={};zbade["type"]="text/javascript";zbade["src"]=x[z205e].src;zbade["async"]="true";zbade["defer"]="true";setTimeout(function(){z32da.ze82b("script",zbade,null,document.getElementsByTagName('head')[0]);},0);z0fee.removeChild(x[z205e]);}else{z32da.z4efc(x[z205e].text);};};}else if(z8186==2||z8186==3){z32da.z4efc(z4cf9[zd081]);}z1a23.Debug.z5060("library/process: updating factor ["+zd081+", opCode: "+z8186+"] with level content.");}catch(z676d){z1a23.Debug.z1dbb("library/process: unable to update factor ["+zd081+"], please review the log for details.",0,z676d);throw "Error during update of the factors level content.";};}};this.z6d0e=function(){z677c.z4cc8();if(z677c.zccdd["r_redirectUrl"]&&!z677c.zccdd["r_safeTrack"]){z1a23.Debug.z5060("error_track: redirecting to last known url ["+z677c.zccdd["r_redirectUrl"]+"]");if(z677c.zccdd["r_redirectLink"]){z677c.zccdd["r_redirectLink"].href=z677c.zccdd["r_redirectUrl"];z677c.zccdd["r_redirectLink"].target=z677c.zccdd["r_redirectLinkTarget"];}if(typeof(z677c.zccdd["r_redirectLinkTarget"])!="undefined"&&z677c.zccdd["r_redirectLinkTarget"]!=""&&z677c.zccdd["r_redirectLinkTarget"]!==null){window.open(z677c.zccdd["r_redirectUrl"],z677c.zccdd["r_redirectLinkTarget"]);z677c.zccdd["r_redirectLinkTarget"]=null;z677c.zccdd["r_redirectLink"]=null;}else{var z12c5=z677c.zccdd["r_redirectUrl"];setTimeout(function(){window.location.href=z12c5;},0);};}};this.z8fe4=function(){this.z019b=zf9ac.za651;var z0dbd=z7715[zf9ac.z7df9];if(z0dbd!==null&&typeof z0dbd!="undefined"){var zbd8c=z0dbd["body"]["preScript"];if(zbd8c!==null&&typeof zbd8c!="undefined"){try{z32da.z4efc(zbd8c);this.z0386.Debug.zfda7("prerender: prescript executed: "+zbd8c);}catch(z392c){this.z0386.Debug.z1dbb("prerender: prescript failed to execute",0,z392c);};};}switch(this.zccdd["r_type"]){case zf9ac.zbf4a:case zf9ac.z10ca:case zf9ac.z7ffc:case zf9ac.zcf44:z0932();break;case zf9ac.z6f4e:case zf9ac.zd4c4:break;default:throw "prerender: Unknown test type, please verify the run type is supported with this version of the CAPI file.";};};this.z8300=function(za1b5){this.z019b=zf9ac.z971e;var z9180=this.zccdd["r_cWrapEl"];var z0386=this.z0386;if((this.zccdd["r_type"]==zf9ac.z6f4e&&!this.zccdd["r_redirectUrl"])||this.zccdd["r_type"]!=zf9ac.z6f4e){if(z9180!==null){if(this.zccdd["defaultUrl"]===null||za1b5){z1a23.zfa9c(z9180,this.zccdd["s_pageDisplayMode"],true);z0386.Debug.zfda7("render: test alias ["+this.zccdd["testAlias"]+"]");}else if(this.zccdd["defaultUrl"]!==null){z0386.Debug.zfda7("render: test alias ["+this.zccdd["testAlias"]+"] has default url ["+this.zccdd["defaultUrl"]+"]");};}else{throw "Unable to locate contentWrapper, skipping render";};}else{z0386.Debug.zfda7("render: test alias ["+this.zccdd["testAlias"]+"] has redirect url.");}if(!z1a23.ze3c2){var z0dbd=z7715[zf9ac.z7df9];if(z0dbd!==null&&typeof z0dbd!="undefined"){var zdfc2=z0dbd["body"]["postScript"];if(zdfc2!==null&&typeof zdfc2!="undefined"){try{z32da.z4efc(zdfc2);z0386.Debug.zfda7("render: postScript executed: "+zdfc2);}catch(z392c){z0386.Debug.z1dbb("render: postScript failed to execute",0,z392c);};};};}};this.z4cc8=function(z937d){if(z7715[z937d]!==null&&typeof z7715[z937d]!="undefined"){for(var zf64e in z7715[z937d]["params"]){this.zccdd[zf64e]=z7715[z937d]["params"][zf64e];};}z7cb0();};this.za7ed=function(){if(z7715[zf9ac.zb7d1]["body"]["cookies"]){for(var z7e3d in z7715[zf9ac.zb7d1]["body"]["cookies"]){var z764b=z7715[zf9ac.zb7d1]["body"]["cookies"][z7e3d];z0f8a(z7e3d,z764b["value"],z764b["timeout"],z764b["type"]);};}if(this.zccdd["r_redirectUrl"]){this.z0386.Debug.z5060("pageview: redirecting to url ["+this.zccdd["r_redirectUrl"]+"]");var z12c5=this.zccdd["r_redirectUrl"];setTimeout(function(){window.location.href=z12c5;},0);}};this.conversion=function(){if(z7715[zf9ac.zb00a]["body"]["cookies"]){for(var z7e3d in z7715[zf9ac.zb00a]["body"]["cookies"]){var z764b=z7715[zf9ac.zb00a]["body"]["cookies"][z7e3d];z0f8a(z7e3d,z764b["value"],z764b["timeout"],z764b["type"]);};}if(this.zccdd["r_redirectUrl"]){this.z0386.Debug.z5060("conversion: redirecting to url ["+this.zccdd["r_redirectUrl"]+"]");if(this.zccdd["r_redirectLink"]){this.zccdd["r_redirectLink"].href=this.zccdd["r_redirectUrl"];this.zccdd["r_redirectLink"].target=this.zccdd["r_redirectLinkTarget"];}if(typeof(this.zccdd["r_redirectLinkTarget"])!="undefined"&&this.zccdd["r_redirectLinkTarget"]!=""&&this.zccdd["r_redirectLinkTarget"]!==null){window.open(this.zccdd["r_redirectUrl"],this.zccdd["r_redirectLinkTarget"]);this.zccdd["r_redirectLinkTarget"]=null;this.zccdd["r_redirectLink"]=null;}else{var z12c5=this.zccdd["r_redirectUrl"];setTimeout(function(){window.location.href=z12c5;},0);};}};this.zac2c=function(event){try{if(z67fd>=event["params"]["eventID"]){return;}z67fd=event["params"]["eventID"];var z0fee=event["target"];var zb7f7=z677c.zccdd["s_keyToken"];if(z0fee["token"]){zb7f7=z0fee["token"];}var z4529=z1a23.z32ad.zcc1d(z0fee["control"],zb7f7);z1a23.Debug.z5d59("control_response: JSON Control Response\n"+z4529);var z0dbd=z9249.parse(z4529);z7715[z0dbd["opcode"]]=z0dbd;var log=z0dbd["body"]["log"];if(log){z1a23.Debug.zfda7("control_response: JSON Control Response Log:\n"+log);}var zf64e={};zf64e["opcode"]=z0dbd["opcode"];z1a23.z88d3(new WTEvent("control_"+z0dbd["opcode"],z0dbd["opstatus"],z677c,zf64e));}catch(z392c){z1a23.Debug.z1dbb("control_response: Unable to evaluate control response, see error for details.",0,z392c);z1a23.z88d3(new WTEvent(WTEvent.ABORT,WTEvent.STATUS_FAULT,z677c));}};this.zdbe8=function(event){try{if(z67fd>=event["params"]["eventID"]){return;}z67fd=event["params"]["eventID"];var z0fee=event["target"];var zb7f7=z677c.zccdd["s_keyToken"];if(z0fee["token"]){zb7f7=z0fee["token"];}var z4529=z1a23.z32ad.zcc1d(z0fee["control"],zb7f7);z1a23.Debug.z5d59("control_fault: JSON Fault Control Response\n"+z4529);var z0dbd=z9249.parse(z4529);z7715[z0dbd["opcode"]]=z0dbd;var z392c={};z392c["message"]=z0dbd["body"]["message"];z392c["stack"]=z0dbd["body"]["exception"];var log=z0dbd["body"]["log"];if(log){z1a23.Debug.zfda7("control_fault: JSON Control Response Log:\n"+log);}z1a23.Debug.z1dbb("control_fault: JSON Control Response Error",0,z392c["message"]);z1a23.Debug.zfda7("control_fault: "+z392c["stack"]);var zf64e={};zf64e["opcode"]=z0dbd["opcode"];z1a23.z88d3(new WTEvent("control_"+z0dbd["opcode"],WTEvent.STATUS_FAULT,z677c,zf64e));}catch(z676d){z1a23.Debug.z1dbb("control_fault: Unable to evaluate control response, see error for details.",0,z676d);z1a23.z88d3(new WTEvent(WTEvent.ABORT,WTEvent.STATUS_FAULT,z677c));}};this.z95e8();};this.z311d=function(z8262,zccdd){function z0309(z0735,z0a96){if(typeof zccdd[z0735]=="undefined"){zccdd[z0735]=z0a96;}};z0309("s_wasServerProto","https");z0309("s_wasServer","was.optimize.webtrends.com");z0309("s_wasPreviewDir","/server/ui/scripts/preview/");z0309("s_wasPreviewJS","previewerLoader.js");z0309("s_mode","normal");z0309("s_otsUrl",zccdd["s_pageProtocol"]+"://"+zccdd["s_otsServer"]+zccdd["s_otsWebApp"]+zccdd["s_otsWebAppServlet"]+"/js-"+zccdd["s_capiMajorVersion"]+"."+zccdd["s_capiMinorVersion"]+"/"+zccdd["s_domainKey"]);z0309("s_wasPreviewPath",zccdd["s_wasServerProto"]+"://"+zccdd["s_wasServer"]+zccdd["s_wasPreviewDir"]);z0309("s_wasPreviewUrl",zccdd["s_wasPreviewPath"]+zccdd["s_wasPreviewJS"]);z0309("s_urlLimit","3450");z0309("s_maxUrl","2040");z0309("s_urlParts",(/MSIE (\d+\.\d+);/.test(navigator.userAgent)));if(typeof z8262!="undefined"){z0309("testAlias",z8262);}z0309("cookiePath","/");z0309("cookieInspection",true);z0309("use3rdPartyCookies",false);z0309("data",{});z0309("cookiePrefix","_wt");z0309("debug","");z0309("defaultUrl",null);if(zccdd['s_keyToken']===null){z1a23.Debug.z1dbb("'s_keyToken' was not provided, loading the page with Webtrends Optimize Technology disabled.",0);z1a23.z88d3(new WTEvent(WTEvent.ABORT,WTEvent.STATUS_FAULT,zccdd));return;}z1a23.Debug.z6c38=zccdd["debug"].length;var z99bf=this.z80f0();if(z99bf!==null){var z3ec0=z99bf["_wt.debug"];if((typeof z3ec0!="undefined")&&z3ec0!==null){zccdd["debug"]=z3ec0;z1a23.Debug.z5dbe=false;z1a23.Debug.z6c38=zccdd["debug"].length;z1a23.Debug.refresh(true);}else{z1a23.Debug.z5dbe=true;}z3ec0=z99bf["_wt.mode"];if((typeof z3ec0!="undefined")&&z3ec0!==null){zccdd["s_mode"]=z3ec0;};}if(zccdd["s_mode"]=="preview"||window.name=="WTbrowserIFrame"){WTOptimize.Preview["g_PreviewOptions"]=zccdd;var zbade={};zbade["type"]="text/javascript";zbade["src"]=zccdd["s_wasPreviewUrl"];zbade["async"]="true";zbade["defer"]="true";setTimeout(function(){z32da.ze82b("script",zbade,null,document.getElementsByTagName('head')[0]);},0);z1a23.Debug.z5060("initialize: using preview mode, aborting testing process.");z1a23.z88d3(new WTEvent(WTEvent.ABORT,WTEvent.STATUS_SUCCESS,zccdd));return;}var z677c=new zf9ac(zccdd,z1a23);z1a23.z2b20.push(z677c);z677c.setup();var z9804=/adobeair\//i;if(zccdd["s_mode"]=="none"||z9804.test(navigator.userAgent)){z1a23.Debug.z5060("initialize: using mode none/air, aborting testing process.");z1a23.z88d3(new WTEvent(WTEvent.ABORT,WTEvent.STATUS_SUCCESS,z677c));return;}return z677c;};this.z1028=function(event){var zae74=event.target;var zf64e=event["params"];try{z1a23.z88d3(new WTEvent(zf64e["opcode"],WTEvent.STATUS_FAULT,zae74));z1a23.z88d3(new WTEvent(WTEvent.ABORT,WTEvent.STATUS_FAULT));}catch(z392c){z1a23.z88d3(new WTEvent(WTEvent.ABORT,WTEvent.STATUS_FAULT));throw z392c;}};this.ze5d9=function(event){var zae74=event.target;var zf64e=event["params"];try{zae74.z4cc8(zf64e["opcode"]);z1a23.z88d3(new WTEvent(WTEvent.INVALID,WTEvent.STATUS_SUCCESS));}catch(z392c){z1a23.z88d3(new WTEvent(WTEvent.ABORT,WTEvent.STATUS_FAULT));throw z392c;}z32da.z1dd6(zae74,false);};this.z3c7c=function(event){var zae74=event.target;var zf64e=event["params"];try{zae74.z4cc8(zf64e["opcode"]);var z64f6=zae74.z452a(zf64e["opcode"]);var z392c={};z392c["message"]=z64f6["body"]["message"];z392c["stack"]=z64f6["body"]["exception"];if(z392c["message"]){z1a23.Debug.z1dbb("error_track: Track Response Error",0,z392c["message"]);}z1a23.Debug.zfda7("error_track: "+z392c["stack"]);z1a23.z88d3(new WTEvent(z64f6["opcode"],WTEvent.STATUS_FAULT,zae74));zae74.z6d0e();}catch(z676d){z1a23.z88d3(new WTEvent(WTEvent.ABORT,WTEvent.STATUS_FAULT,z676d));throw z676d;}};this.z4708=function(event){var zae74=event.target;var zf64e=event["params"];try{zae74.z4cc8(zf64e["opcode"]);zae74.z0386.Debug.z5060(event.name+": Page View Track ["+zae74.zccdd["testAlias"]+"]");z1a23.z88d3(new WTEvent(WTEvent.PAGEVIEW,WTEvent.STATUS_SUCCESS,zae74));zae74.za7ed();}catch(z392c){z1a23.z88d3(new WTEvent(WTEvent.PAGEVIEW,WTEvent.STATUS_FAULT,zae74));z1a23.z88d3(new WTEvent(WTEvent.ABORT,WTEvent.STATUS_FAULT,z392c));throw z392c;}};this.z5b2c=function(event){var zae74=event.target;var zf64e=event["params"];try{zae74.z4cc8(zf64e["opcode"]);zae74.z0386.Debug.z5060(event.name+": Conversion Track ["+zae74.zccdd["testAlias"]+"]");z1a23.z88d3(new WTEvent(WTEvent.CONVERSION,WTEvent.STATUS_SUCCESS,zae74));zae74.conversion();}catch(z392c){z1a23.z88d3(new WTEvent(WTEvent.CONVERSION,WTEvent.STATUS_FAULT,zae74));z1a23.z88d3(new WTEvent(WTEvent.ABORT,WTEvent.STATUS_FAULT,z392c));throw z392c;}};this.zede2=function(event){var zae74=event.target;try{zae74.z0386.Debug.zfda7(event.name+": JSON Control Response Page Evaluation");zae74.zc52f();z1a23.z88d3(new WTEvent(WTEvent.PREPROCESS,WTEvent.STATUS_SUCCESS,zae74));}catch(z392c){z1a23.z88d3(new WTEvent(WTEvent.PREPROCESS,WTEvent.STATUS_FAULT,zae74));z1a23.z88d3(new WTEvent(WTEvent.ABORT,WTEvent.STATUS_FAULT,z392c));throw z392c;}zae74.zf563(true);};this.z348e=function(event){var zae74=event.target;try{zae74.z0386.Debug.zfda7(event.name+": JSON Control Response Page Processing");zae74.z596e();z1a23.z88d3(new WTEvent(WTEvent.PROCESS,WTEvent.STATUS_SUCCESS,zae74));}catch(z392c){z1a23.z88d3(new WTEvent(WTEvent.PROCESS,WTEvent.STATUS_FAULT,zae74));z1a23.z88d3(new WTEvent(WTEvent.ABORT,WTEvent.STATUS_FAULT,z392c));throw z392c;}if(zae74.zccdd["s_pageMode"]=="dom"&&!z32da.zf086()){z1a23.Debug.zfda7(event.name+": delayed execution waiting for dom_ready");z1a23.zd0b7(WTEvent.zecbe,function(){z1a23.za099(WTEvent.zecbe,arguments.callee);z32da.z76bb(zae74);});}else if(zae74.zccdd["s_pageMode"]=="onload"&&!z32da.zdccc()){z1a23.Debug.zfda7(event.name+": delayed execution waiting for dom_onload");z1a23.zd0b7(WTEvent.z6fd7,function(){z1a23.za099(WTEvent.z6fd7,arguments.callee);z32da.z76bb(zae74);});}else{z32da.z76bb(zae74);}};this.zd78e=function(event){var zae74=event.target;try{zae74.z0386.Debug.zfda7(event.name+": JSON Control Response Conversion Event Processing");z1a23.z88d3(new WTEvent(WTEvent.PRECONVERSIONEVENT,WTEvent.STATUS_SUCCESS,zae74));}catch(z392c){z1a23.z88d3(new WTEvent(WTEvent.PRECONVERSIONEVENT,WTEvent.STATUS_FAULT,zae74));}if(zae74.zccdd["s_pageMode"]=="dom"&&!z32da.zf086()){z1a23.Debug.zfda7(event.name+": delayed execution waiting for dom_ready");z1a23.zd0b7(WTEvent.zecbe,function(){z1a23.za099(WTEvent.zecbe,arguments.callee);z32da.ze2b3(zae74);});}else if(zae74.zccdd["s_pageMode"]=="onload"&&!z32da.zdccc()){z1a23.Debug.zfda7(event.name+": delayed execution waiting for dom_onload");z1a23.zd0b7(WTEvent.z6fd7,function(){z1a23.za099(WTEvent.z6fd7,arguments.callee);z32da.ze2b3(zae74);});}else{z32da.ze2b3(zae74);}};this.ze2b3=function(zae74){try{zae74.zee58();z1a23.z88d3(new WTEvent(WTEvent.CONVERSIONEVENT,WTEvent.STATUS_SUCCESS,zae74));}catch(z392c){z1a23.z88d3(new WTEvent(WTEvent.CONVERSIONEVENT,WTEvent.STATUS_FAULT,zae74));}};this.z76bb=function(zae74){try{if(!z1a23.ze3c2){zae74.z8fe4();}z1a23.z88d3(new WTEvent(WTEvent.PRERENDER,WTEvent.STATUS_SUCCESS,zae74));}catch(z392c){z1a23.z88d3(new WTEvent(WTEvent.PRERENDER,WTEvent.STATUS_FAULT,zae74));z1a23.z88d3(new WTEvent(WTEvent.ABORT,WTEvent.STATUS_FAULT,z392c));throw z392c;}z32da.z1dd6(zae74,true);};this.z1dd6=function(zae74,zb803){try{zae74.z8300(zb803);z1a23.z88d3(new WTEvent(WTEvent.RENDER,WTEvent.STATUS_SUCCESS,zae74));}catch(z392c){z1a23.z88d3(new WTEvent(WTEvent.RENDER,WTEvent.STATUS_FAULT,zae74));z1a23.z88d3(new WTEvent(WTEvent.ABORT,WTEvent.STATUS_FAULT,z392c));throw z392c;}z32da.z2d27();if(zb803){try{zae74.z45cc("pageview");}catch(z676d){zae74.z0386.Debug.z1dbb("render/track: unable to track pageview for run",0,z676d);};}else if(zae74.zccdd["defaultUrl"]!==null){z1a23.z88d3(new WTEvent(WTEvent.ABORT,WTEvent.STATUS_SUCCESS,zae74));}};this.z2d27=function(){try{var zfbf0=true;for(var z205e=0;z205e<z1a23.z2b20;z205e++){var z9da9=z1a23.z2b20[z205e];if(z9da9.z019b!=zf9ac.DONE){zfbf0=false;break;};}if(zfbf0){WTOptimize.z4e9a=new Date();if(WTOptimize.z907d){clearTimeout(WTOptimize.z907d);WTOptimize.Debug.z5060("done: clearing active timer, all runs are complete ["+WTOptimize.z4e9a+"]");}else{WTOptimize.Debug.z5060("done: no active timer found, all runs are complete ["+WTOptimize.z4e9a+"]");}z1a23.z88d3(new WTEvent(WTEvent.DONE,WTEvent.STATUS_SUCCESS));}}catch(z392c){z1a23.z88d3(new WTEvent(WTEvent.DONE,WTEvent.STATUS_FAULT,z392c));z1a23.z88d3(new WTEvent(WTEvent.ABORT,WTEvent.STATUS_FAULT,z392c));}};this.ze82b=function(type,zbade,zfce9,parent,z9520){if(!z9520){if(parent){z9520=parent.ownerDocument;}if(!z9520){z9520=document;};}var n=z9520.createElement(type);if(zbade){for(var z205e in zbade){if(zbade[z205e]&&zbade.hasOwnProperty(z205e)){n.setAttribute(z205e,zbade[z205e]);};};}if(zfce9){for(var z392c in zfce9){if(zfce9[z392c]&&zfce9.hasOwnProperty(z392c)){z1a23.z9d5a(n,z392c,zfce9[z392c]);};};}if(parent){parent.appendChild(n);}return n;};this.z4efc=function(z8ad6,z2392){try{if(!z8ad6||z8ad6.length===0||z8ad6===""){return null;}if(z2392){return eval(z8ad6);}if(window.execScript){return window.execScript(z8ad6);}else{var z5582=window;with(z5582){return z5582.eval(z8ad6);};}}catch(z392c){z1a23.Debug.z1dbb("error during execScript:\n"+z8ad6,0,z392c);throw z392c;}};this.z31a9=function(){var z8a22=new Date();var z618e=new Date(z8a22.getFullYear(),0,1,0,0,0,0);var z5b5d=new Date(z8a22.getFullYear(),6,1,0,0,0,0);var zf41e=z618e.toGMTString();var zc454=new Date(zf41e.substring(0,zf41e.lastIndexOf(" ")-1));zf41e=z5b5d.toGMTString();var z9cdb=new Date(zf41e.substring(0,zf41e.lastIndexOf(" ")-1));var z9cf0=(z618e-zc454)/(1000*60*60);var z157d=(z5b5d-z9cdb)/(1000*60*60);var z18bd;if(z9cf0==z157d){z18bd="0";}else{var z9158=z9cf0-z157d;if(z9158>=0){z9cf0=z157d;}z18bd="1";}return z9cf0;};this.z80f0=function(z7696){var z82c5=z7696;try{var test=z7696.location.search;}catch(z392c){z82c5=document;}if(z82c5.location.search){var z971c=z82c5.location.search.substring(1,z82c5.location.search.length);var zbea6=z971c.split("&");if(zbea6!==null&&zbea6.length===0){zbea6=z971c.split(";");}var z43ac=(zbea6.length-1);var z33f9={};for(var z205e=0;z205e<=z43ac;z205e++){var z6b05=zbea6[z205e].split("=");z6b05[0]=unescape(z6b05[0]);z6b05[1]=unescape(z6b05[1]);z6b05[0]=z6b05[0].replace(/\+/g," ");z6b05[1]=z6b05[1].replace(/\+/g," ");z6b05[1]=z6b05[1].replace(/<.*\?>/g,"");z33f9[z6b05[0]]=z6b05[1];}return z33f9;}else{return null;}};this.za226=function(){if(location.search){return location.search;}return "";};this.zcc1d=function(z086a,z245d){if(z086a===null||z086a.length<8){return;}var z87de="";for(var z205e=0;z205e<z245d.length;z205e++){z87de+=z245d.charCodeAt(z205e).toString();}var z17c3=Math.floor((z87de.length-1)/5);var zf94e=z87de.charAt(z17c3)+z87de.charAt(z17c3*2)+z87de.charAt(z17c3*3)+z87de.charAt(z17c3*4)+z87de.charAt(z17c3*5);var zf434=parseInt(zf94e,10);var z13c5=Math.round(z245d.length/2);var z8739=Math.pow(2,31)-1;var z2d2e=parseInt(z086a.substring(z086a.length-8,z086a.length),16);z086a=z086a.substring(0,z086a.length-8);z87de+=z2d2e;z87de=(zf434*z87de+z13c5)%z8739;var z9fbe=[];for(var zc383=0;zc383<z086a.length;zc383+=2){var za9e3=parseInt(parseInt(z086a.substring(zc383,zc383+2),16)^Math.floor((z87de/z8739)*255),10);z9fbe.push(String.fromCharCode(za9e3));z87de=(zf434*z87de+z13c5)%z8739;}return z9fbe.join('');};this.zcdd3=function(z086a,z245d){if(z086a===null){return null;}var z87de="";for(var z205e=0;z205e<z245d.length;z205e++){z87de+=z245d.charCodeAt(z205e).toString();}var z17c3=Math.floor((z87de.length-1)/5);var zf94e=z87de.charAt(z17c3)+z87de.charAt(z17c3*2)+z87de.charAt(z17c3*3)+z87de.charAt(z17c3*4)+z87de.charAt(z17c3*5);while(zf94e.length>0&&zf94e.charAt(0)==="0"){zf94e=zf94e.substring(1,zf94e);}var zf434=parseInt(zf94e,10);var z13c5=Math.ceil(z245d.length/2);var z8739=Math.pow(2,31)-1;if(zf434<2){return null;}var z2d2e=Math.round(Math.random()*1000000000)%100000000;z87de+=z2d2e;z87de=(zf434*z87de+z13c5)%z8739;var z9fbe=[];for(var zc383=0;zc383<z086a.length;zc383++){var za9e3=parseInt(z086a.charCodeAt(zc383)^Math.floor((z87de/z8739)*255),10);if(za9e3<16){z9fbe.push("0");}z9fbe.push(za9e3.toString(16));z87de=(zf434*z87de+z13c5)%z8739;}z2d2e=z2d2e.toString(16);while(z2d2e.length<8){z2d2e="0"+z2d2e;}z9fbe.push(z2d2e);return z9fbe.join('');};this.zf086=function(){return z0eb2;};this.zdccc=function(){return z1a23.zefb8;};this.z95e8();};WTOptimize.Preview={};WTOptimize.z32ad=new WTOptimize.zd67f(WTOptimize);WTOptimize.z32ad.z454c=function(){var z4fb7=function(zbcb4,zd3b2){for(var z205e=0,length=zd3b2.length;z205e<length;z205e++){if(zd3b2[z205e]===zbcb4){return z205e;};}return-1;};var z0ff6=function(zbcb4){var children=[];var z6fb5=zbcb4.firstChild;while(z6fb5){if(z6fb5.nodeType===1&&z6fb5!==zbcb4){children.push(z6fb5);}z6fb5=z6fb5.nextSibling;}return children;};var z8661=function(zbcb4){return z4fb7(zbcb4,z0ff6(zbcb4.parentNode));};var z41d4=function(id){return document.getElementById(id);};var za4ce=function(name){return document.getElementsByTagName(name)[0];};var z31fc=function(z452f){if(z452f.id){return "#"+z452f.id;}else{return z452f.tagName.toLowerCase()+"["+z8661(z452f)+"]";}};var z1e66=function(zbcb4){if(typeof zbcb4==='string'){return zbcb4.match(/\[|#|\//)?WTOptimize.z32ad.z454c.z0c82(zbcb4):z41d4(zbcb4);}else{return zbcb4;}};return{z3e34:function(zbcb4){var zc60b=[];var za720=zbcb4;while(za720){zc60b.push(z31fc(za720));if(za720.id){break;}za720=za720.parentNode;}zc60b.reverse();return zc60b.join("/");},z0c82:function(zeacd){var zc42b=null;if(zeacd.match(/[#\[\]$]/)){var z2605=zeacd.split("/");for(var z205e=0;z205e<z2605.length;z205e++){var id=z2605[z205e].match(/(?:#)(.+?)(?=\[|$)/);var index=z2605[z205e].match(/(?:\[)(.+)(?=\])/);var tagName=z2605[z205e].match(/^.+?(?=#|\[)/);if(id){zc42b=z41d4(id[1]);if(!zc42b){return null;};}if(zc42b&&index){zc42b=z0ff6(zc42b)[index[1]];if(!zc42b||zc42b.localName!=tagName[0]){return null;};}if(!zc42b){if(tagName){zc42b=za4ce(tagName[0]);}else{return null;};};};}else{zc42b=z41d4(zeacd);}return zc42b;}};}();WTOptimize.fireEvent(new WTEvent(WTEvent.zd938,WTEvent.STATUS_SUCCESS),true);
